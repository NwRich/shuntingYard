#include <iostream>
#include <cstring>
#include <ctype.h>
#include "node.h"
#include <map>
#include <vector>

using namespace std;
void add(char* newChar, int i, vector<char> &output);
void print (vector<char> output);//pass in a vector
void debug();
node* head;
int main () {
  bool working = true;
  char* input = new char[16];
  vector<char> output;
  while (working == true) {
    cout << "add, list, quit" << endl;
    cin >> input;
    cin.get();
    if (strcmp(input, "add") == 0) {
      char* newChar = new char[32];
      int i = 0;
      cin >> newChar;
      cin.get();
      add(newChar,i,output);
    }
    if (strcmp(input, "list") == 0) {
      print(output);//pass in a vector
    }
    if (strcmp(input, "quit") == 0) {
      working = false;
    }
  }
  return 0;
}
void add (char* newChar, int i, vector<char> &output) {
  map<char, int> precedence;
  precedence['+'] = 2;
  precedence['-'] = 2;
  precedence['*'] = 3;
  precedence['/'] = 3;
  precedence['^'] = 4;
  for (int i = 0; i < 16; i++) {
    if(isdigit(newChar[i])) {
      output.push_back(newChar[i]);
    }
    node* current = head;
    while (current->getRight() != NULL) {
      current = current->getRight();
    }
    while (precedence[current->getValue()] >= precedence[newChar[i]] && newChar[i] != '(') {
      node* setOut = new node();
      setOut->setValue(newChar[i]);
      current->setRight(setOut);
    }
    if (newChar[i] == '(') {
      current = head;
      while (current->getRight() != NULL) {
	current = current->getRight();
      }
      node* newNode = new node();
      newNode->setValue(newChar[i]);
      current->setRight(newNode);
    }
    if (newChar[i] == ')') {
      current = head;
      while (current->getRight() != NULL) {
	current = current->getRight();
      }
      while (current->getValue() != '(') {
	output.push_back(current->getValue());
	current = current->getLeft();
      }
      //pop out the left bracket and get rid of the right bracket
    }
  }
  while(head->getRight() != NULL) {
    //push out the operator onto the stack
  }
}

void print (vector<char> output) {//pass in a vector
  for (vector<char>::iterator it = output.begin(); it != output.end(); it++) {
    cout << *it << endl;
  }
}

void debug() {
  bool working = false;
  if (working == true) {
    cout << "debug" << endl;
  }
}
